<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Zotero :: My documentation</title>
    <link rel="canonical" href="https://rolfkleef.github.io/documentation_system/zotero/index.html">
    <link rel="prev" href="../antora/index.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css" rel="stylesheet">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://rolfkleef.github.io">rolf@drostan.org</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
  <a class="navbar-link">My documentation</a>
  <div class="navbar-dropdown">
    <a class="navbar-item" href="/">My documentation</a>
  </div>
</div>
        <div class="navbar-item has-dropdown is-hoverable">
    <a class="navbar-link">Documentation system</a>
  <div class="navbar-dropdown">
        <a class="navbar-item" href="../../desktop/index.html">Desktop</a>
        <a class="navbar-item" href="../../overview/index.html">Overview</a>
        <a class="navbar-item" href="../../styleguide/index.html">Style guide</a>
  </div>
</div>
          <div class="navbar-item">
            <input id="search-input" type="text" placeholder="Search this section">
          </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="documentation_system" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Documentation system</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../technology_choices/index.html">Technology choices</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../technology_choices/asciidoc-antora.html">Asciidoc and Antora</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../technology_choices/plantuml-kroki.html">PlantUML and Kroki</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../style_choices/index.html">Style choices</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../asciidoc/index.html">Asciidoc</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../asciidoc/code-documentation/index.html">Code and configuration documentation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../asciidoc/code-documentation/bash.html">Bash shell scripts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../asciidoc/code-documentation/yaml.html">Yaml files</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../antora/index.html">Antora</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="index.html">Zotero</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Documentation system</span>
    <span class="version">main</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../desktop/index.html">Desktop</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../desktop/index.html">main</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">Documentation system</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">main</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../overview/index.html">Overview</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../overview/index.html">main</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../styleguide/index.html">Style guide</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../styleguide/index.html">main</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../overview/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Documentation system</a></li>
    <li><a href="index.html">Zotero</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/rolf/dev/websites/rolfkleef.github.io/docs/documentation_system/modules/zotero/pages/index.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Zotero</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://www.zotero.org" target="_blank" rel="noopener">Zotero</a> is a reference manager to keep track of the work of others.
We use Zotero as a <strong>content helper</strong> to generate lists of background reading or additional information on documentation pages.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_system_overview"><a class="anchor" href="#_system_overview"></a>System overview</h2>
<div class="sectionbody">
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This is a <em>works-for-me solution</em> that could eventually be replaced by an Asciidoc macro, an Antora pipeline component,
and/or a bibtex-based approach, to be more in line with common practice.</p>
</div>
<div class="paragraph">
<p>This version does not build a bibliography based on in-text references, it just creates a list as HTML file to be included.
There is no way to cross reference or link between the text and a specific reference.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="imageblock kroki">
<div class="content">
<img src="_images/diag-9a993e0b56ad98d7bbda07e4f77ab659741c0716.svg" alt="Zotero subsystem overview">
</div>
<div class="title">Figure 1. Zotero subsystem overview</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_activities"><a class="anchor" href="#_activities"></a>Activities</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <strong>editor</strong> performs a few tasks.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#step1">Organise references in Zotero</a></p>
</li>
<li>
<p><a href="#step2">Add Zotero lookup details to the content</a></p>
</li>
<li>
<p><a href="#step3">Run the content helper</a></p>
</li>
<li>
<p><a href="#step4">Include the reference list in a page</a></p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="step1"><a class="anchor" href="#step1"></a>Organise references in Zotero</h3>
<div class="paragraph">
<p>Zotero lets you organise references in <em>collections</em> and label them with <em>tags</em>.
Both can be used to later retrieve a set of references from Zotero.
We use a <em>collection</em> for each page.
<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p>
</div>
<div class="paragraph">
<p>It is possible to move collections around in Zotero without changing their identifier.
This decouples the exact hierarchy and organisation of collections in Zotero from the documentation pages.</p>
</div>
<div class="imageblock kroki">
<div class="content">
<img src="_images/diag-cad87406e6efd63f9460d494536f6301a226a7a4.svg" alt="Current organisation of collections in Zotero">
</div>
<div class="title">Figure 2. Current organisation of collections in Zotero</div>
</div>
</div>
<div class="sect2">
<h3 id="step2"><a class="anchor" href="#step2"></a>Add Zotero lookup details to the content</h3>
<div class="paragraph">
<p>Each content component can have a file called <code>zotero</code> in the same folder as the <code>antora.yml</code> file.
This file contains a list of reference lists to generate.</p>
</div>
<div class="listingblock">
<div class="title">A <code>zotero</code> file with two lists</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">collections/NAN7TETL/ ROOT background-refs <i class="conum" data-value="1"></i><b>(1)</b>
collections/JBHC442F/ module1 further-reading mytag <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Get all references in the collection, and add them as <code>background-refs.html</code> to the <code>partials</code> folder of the <code>ROOT</code> module.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Get references in the collection with tag <code>mytag</code>, and add them as <code>further-reading.html</code> to the <code>partials</code> folder of the <code>module1</code> module.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The collection id can be found in the web address <a href="https://www.zotero.org/rolfkleef/collections/NAN7TETL" target="_blank" rel="noopener">when visiting the collection online</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="step3"><a class="anchor" href="#step3"></a>Run the content helper</h3>
<div class="paragraph">
<p>The content helper <code>get-zoteros</code> is a script that can be run in a component folder.
See below for the script itself.
It will process the <code>zoteros</code> file and use the Zotero API to do two retrievals:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Get an HTML-formatted list of references using a specified CSL file.
<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup></p>
</li>
<li>
<p>Add the same list formatted as COinS, to let readers quickly add the references to their own reference manager.
<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The resulting HTML file is stored in the <code>partials</code> folder of a module.</p>
</div>
</div>
<div class="sect2">
<h3 id="step4"><a class="anchor" href="#step4"></a>Include the reference list in a page</h3>
<div class="paragraph">
<p>The reference list can be added to a page with a simple Asciidoc <code>include</code> statement in a pass-through block.</p>
</div>
<div class="listingblock">
<div class="title">Add the references to an Asciidoc page</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">++++
include::partials$background-refs.html[]
++++</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_content_helper_script"><a class="anchor" href="#_content_helper_script"></a>Content helper script</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">The <code>get-zoteros</code> script</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">#!/bin/bash
# load a series of zotero collections for an Antora documentation component
ZAPI=https://api.zotero.org
ZSRC=users/12345 <i class="conum" data-value="1"></i><b>(1)</b>
CSL=https://www.drostan.org/drostan.csl <i class="conum" data-value="2"></i><b>(2)</b>

if [[ -e antora.yml &amp;&amp; -e zotero ]]; then
  cat zotero | while read zget module partial tag; do
    if [[ -n "$tag" ]]; then
      with_tag=" with tag $tag"
      p_tag="&amp;tag=$tag"
    else
      with_tag=
      p_tag=
    fi
    echo "Getting $zget/items$with_tag and putting into $module/partials/$partial.html"
    mkdir -p "modules/$module/partials"
    curl -sS "$ZAPI/$ZSRC/${zget}items?format=bib&amp;linkwrap=1$p_tag&amp;itemType=-attachment&amp;style=$CSL" -o "modules/$module/partials/$partial.html"
    echo "Appending COinS info"
    curl -sS "$ZAPI/$ZSRC/${zget}items?format=coins$p_tag&amp;itemType=-attachment" &gt;&gt; "modules/$module/partials/$partial.html"
  done
fi</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Replace <code>12345</code> with the appropriate user id. The user id can be found <a href="https://www.zotero.org/settings/keys" target="_blank" rel="noopener">on Zotero&#8217;s Feeds/API settings page</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Replace the URL of the CSL file with the desired style definition.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <a href="https://www.zotero.org/support/dev/web_api/v3/basics" target="_blank" rel="noopener">Zotero API documentation</a> can help to change the API call to your liking.</p>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Zotero references can be part of multiple collections.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. <a href="https://citationstyles.org/" target="_blank" rel="noopener">See the Citation Style Language website for available styles</a>
</div>
<div class="footnote" id="_footnotedef_3">
<a href="#_footnoteref_3">3</a>. <a href="https://en.wikipedia.org/wiki/COinS" target="_blank" rel="noopener">ContextObjects in Spans (COinS) embeds bibliographic metadata as HTML code.</a>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="../antora/index.html">Antora</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="columns">
    <aside>
      <h1>Contact me</h1>
      <p><a href="mailto://rolf@drostan.org" rel="me">rolf@drostan.org</a></p>
      <p><a href="https://www.drostan.org/contact/" rel="me" title="Pick a suitable time for both of us to talk.">propose a call or meeting</a></p>
    </aside>

    <aside>
      <h1>Hire me via</h1>
      <p><a href="https://www.data4development.nl">Data4Development B.V.</a><br>The Netherlands</p>
      <p><a href="mailto://rolf@data4development.org" rel="me">rolf@data4development.org</a></p>
    </aside>

    <aside>
      <h1>My office</h1>
      <p><a href="https://www.timorplein.com" target="_blank" rel="noopener">U-30</a><br><a href="https://www.google.nl/maps/dir//Timorplein+30,+1094+CC+Amsterdam" target="_blank" rel="noopener">Timorplein 30<br>Amsterdam, The Netherlands</a></p>
    </aside>

    <aside>
      <h1>Official links</h1>
      <p><a href="https://www.kvk.nl/orderstraat/product-kiezen/?kvknummer=615707450000" title="Chamber of Commerce/Kamer van Koophandel registration, click to verify" target="_blank">Registration: KvK 61570745</a></p>
      <p><a href="https://ec.europa.eu/taxation_customs/vies/vatResponse.html?memberStateCode=NL&amp;number=001411397B38" title="VAT or BTW registration: click to verify" target="_blank">VAT/BTW: NL001411397B38</a></p>
    </aside>
  </div>

  <div class="credits">
    <p><a href="/overview/colophon.html">colophon and copyright notice</a></p>
  </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/vendor/search.js" id="search-script" data-base-path="../.." data-page-path="/documentation_system/zotero/index.html"></script>
<script async src="../../_/../search-index.js"></script>
<script type="application/json" class="js-hypothesis-config">
{
  "showHighlights": "whenSidebarOpen"
}
</script>
<script async src="https://hypothes.is/embed.js"></script>  </body>
</html>
